# CAAA Configuration

data:
  raw_path: "data/raw"
  processed_path: "data/processed"
  synthetic_path: "data/synthetic"
  systems: ["online-boutique", "sock-shop", "train-ticket"]
  n_services: 12
  sequence_length: 60

  # RCAEval dataset settings
  rcaeval:
    dataset: "RE1"
    systems: ["online-boutique", "sock-shop", "train-ticket"]

features:
  window_size: 60
  stride: 10
  # Feature counts are defined in src/features/feature_schema.py
  # n_workload: 6, n_behavioral: 6, n_context: 5, n_statistical: 13, n_service_level: 6

  workload_features:
    - global_load_ratio
    - cpu_request_correlation
    - cross_service_sync
    - error_rate_delta
    - latency_cpu_correlation
    - memory_trend_uniformity

  behavioral_features:
    - onset_gradient
    - peak_duration
    - cascade_score
    - recovery_indicator
    - affected_service_ratio
    - variance_change_ratio

  context_features:
    - event_active
    - event_expected_impact
    - time_seasonality
    - recent_deployment
    - context_confidence

model:
  # LSTM autoencoder for optional pre-stage anomaly detection.
  # Enable via --anomaly-detector flag in main.py / train.py.
  anomaly_detector:
    type: "lstm_ae"
    hidden_dim: 64
    latent_dim: 16
    num_layers: 2
    seq_length: 30
    threshold_percentile: 95
    calibration_split: 0.2

  caaa_model:
    input_dim: 36
    hidden_dim: 64
    context_dim: 5
    n_classes: 2
    dropout: 0.1

  classifier:
    type: "random_forest"
    n_estimators: 100
    max_depth: 10

  feature_encoder:
    hidden_dim: 64
    num_layers: 2
    dropout: 0.1

  context_module:
    context_dim: 5
    hidden_dim: 32

training:
  epochs: 50
  batch_size: 32
  learning_rate: 0.001
  early_stopping_patience: 10
  test_split: 0.2
  val_split: 0.1

evaluation:
  metrics: ["accuracy", "precision", "recall", "f1", "confusion_matrix"]
  fp_reduction_target: 0.40
  fault_recall_target: 0.90

output:
  model_path: "models/final"
  results_path: "outputs/results"
  figures_path: "outputs/figures"
